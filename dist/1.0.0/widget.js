define("matcha/widget/1.0.0/widget",["jquery","utility/backbone/1.1.1/backbone","utility/handlebars/1.3.0/handlebars"],function(a,b,c){function d(a){return j.isFunction(a)}function e(a){return j.contains(document.documentElement,a)}function f(a){if(!a)return{};var b,c,e={};for(b in a)c=a[b],e[b]=d(c)?c:l.compile(c);return e}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];b.hasOwnProperty(e)&&delete b[e]}return b}function h(a){return a.charAt(0).toUpperCase()+a.substring(1)}function i(a){return null==a||void 0===a}var j=a("jquery"),k=a("utility/backbone/1.1.1/backbone"),l=a("utility/handlebars/1.3.0/handlebars"),m={},n={id:null,className:null,template:null,templateModel:null,parentNode:document.body},o={},p=["model","collection","el","attributes","events"],q=k.View.extend({_renderElement:function(a,b){var c=this;if(a||(a=c.get("template")),b||(b=c.get("templateModel"))||(b={}),b.toJSON&&(b=b.toJSON()),d(a))return a(b,{helpers:c.templateHelpers,partials:f(c.templatePartials)});var e=c.templateHelpers,g=c.templatePartials;if(e){var h;for(h in e)e.hasOwnProperty(h)&&l.registerHelper(h,e[h])}if(g){var i;for(i in g)g.hasOwnProperty(i)&&l.registerPartial(i,g[i])}var j=o[a];j||(j=o[a]=l.compile(a));var k=j(b);if(e){var h;for(h in e)e.hasOwnProperty(h)&&delete l.helpers[h]}if(g){var i;for(i in g)g.hasOwnProperty(i)&&delete l.partials[i]}return k},_parseElementFromTemplate:function(){var a,b=this,c=b.get("template");/^#/.test(c)&&(a=j(c))&&(c=a.html(),b.set("template",c)),b.el=b._renderElement(c)},_ensureElement:function(){},_parseElement:function(){var a=this,b=!a.el&&a.get("template");if(b?(a._parseElementFromTemplate(),a.setElement(a.el,!1),a._isTemplate=!0):k.View.prototype._ensureElement.apply(a),!a.$el||!a.$el[0])throw new Error("element is invalid")},_stamp:function(){var a=this,b=a.cid;m[b]=a},_bindAttrsChange:function(){var a,b=this,c=b._attrsModel.attributes;for(a in c)if(c.hasOwnProperty(a)){var d="_onChange"+h(a);if(b[d]){var e=b.get(a);i(e)||b[d](e,{}),function(c){b.on("change:"+a,function(a,d,e){b[c](d,e)})}(d)}}},_onChangeId:function(a){this.$el.attr("id",a)},_onChangeClassName:function(a){this.$el.attr("class",a)},templateHelpers:null,templatePartials:null,initialize:function(a){a||(a={});var b=this,c=j.extend(!0,{},n,b.attrs||{},a),d=g(p,c);b._attrsModel=new(k.Model.extend({defaults:d}));var e=b.get("id");e&&(b.id=e);var f=b.get("className");return f&&(b.className=f),b._parseElement(),b.setup(),b._stamp(),b},get:function(){var a=this;return a._attrsModel.get.apply(a._attrsModel,arguments)},set:function(){var a=this;return a._attrsModel.set.apply(a._attrsModel,arguments),a},on:function(){var a=this;return a._attrsModel.on.apply(a._attrsModel,arguments),a},off:function(){var a=this;return a._attrsModel.off.apply(a._attrsModel,arguments),a},trigger:function(){var a=this;return a._attrsModel.trigger.apply(a._attrsModel,arguments),a},setup:function(){},render:function(){var a=this;a.rendered||(a._bindAttrsChange(),a.rendered=!0);var b=a.get("parentNode");return b&&!e(a.el)&&a.$el.appendTo(b),a},remove:function(){var a=this;return delete m[a.cid],k.View.prototype.remove.apply(a),a}});c.exports=q,j(window).unload(function(){var a,b;for(a in m)b=m[a],b&&b.remove()})});